<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://Mozziehh.github.io</id>
    <title>å·®ä¸å¤šèƒ¡å…ˆç”Ÿ</title>
    <updated>2019-11-22T00:41:54.757Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://Mozziehh.github.io"/>
    <link rel="self" href="https://Mozziehh.github.io/atom.xml"/>
    <subtitle>ä¹¦å±±æœ‰è·¯å‹¤ä¸ºå¾„ï¼Œå­¦æµ·æ— æ¶¯è‹¦ä½œèˆŸ</subtitle>
    <logo>https://Mozziehh.github.io/images/avatar.png</logo>
    <icon>https://Mozziehh.github.io/favicon.ico</icon>
    <rights>All rights reserved 2019, å·®ä¸å¤šèƒ¡å…ˆç”Ÿ</rights>
    <entry>
        <title type="html"><![CDATA[æ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•ä¸åˆ·æœºHookä»£ç ]]></title>
        <id>https://Mozziehh.github.io/post/shou-ba-shou-jiao-ni-ru-he-bu-shua-ji-hook-dai-ma</id>
        <link href="https://Mozziehh.github.io/post/shou-ba-shou-jiao-ni-ru-he-bu-shua-ji-hook-dai-ma">
        </link>
        <updated>2019-11-22T00:39:38.000Z</updated>
        <content type="html"><![CDATA[<p>##1. èƒŒæ™¯</p>
<blockquote>
<p>å‰å‡ ä¸ªæœˆï¼Œæˆ‘ä»¬åŒTEGçš„åŒå­¦ä¸€èµ·æ’æŸ¥ä¸€ä¸ªé—®é¢˜ï¼šBç«¯ç”¨æˆ·ä½¿ç”¨é»‘äº§æä¾›çš„è½¯ä»¶æ¥Hookæˆ‘ä»¬çš„APIï¼Œè¾¾åˆ°åœ¨å‘é€IMæ¶ˆæ¯æ—¶å‘é€è‡ªå®šä¹‰æ¶ˆæ¯çš„ç›®çš„ï¼Œæ¯”å¦‚ï¼šåœ¨tipsé‡Œé¢å¼¹å‡ºï¼Œâ€œæ·˜å®å®¢æœï¼Œæ—¥ç»“300ï¼ŒåŠ V xxxxxxxâ€</p>
</blockquote>
<blockquote>
<p>å¸¦ç€ä¸€é¢—å¼ºçƒˆçš„å¥½å¥‡å¿ƒï¼Œæˆ‘èµ°è¿›äº†Xposedçš„ä¸–ç•Œï¼Œå‘ç°åŸæ¥Androidçš„ä¸–ç•Œè¿˜å¯ä»¥å¦‚æ­¤ç²¾å½©ã€‚</p>
</blockquote>
<p>##2. Xposed-ä»å…¥é—¨åˆ°æ”¾å¼ƒ<br>
æèµ·Xposedï¼Œå¯èƒ½å¾ˆå¤šäººéƒ½å¬è¿‡å®ƒçš„åå­—ï¼ŒçŸ¥é“å®ƒæ˜¯ä»€ä¹ˆã€‚</p>
<p>ä½†æ˜¯å…·ä½“å†æ·±æŒ–ä¸€ä¸‹ï¼Œå®ƒçš„åŸç†æ˜¯ä»€ä¹ˆï¼Œå¯èƒ½å¤§å®¶å°±ä¼šå›ç­”çš„å¾ˆæ¨¡ç³Šã€‚</p>
<p>å¦‚æœå†æ·±æŒ–ä¸€ä¸‹ï¼Œconst u2* insnsæ˜¯å¹²ä»€ä¹ˆç”¨çš„ï¼Ÿ</p>
<p>å¦‚ä½•å†æ¶‰åŠåˆ°å®è·µï¼Œå¦‚ä½•Hookä¸€ä¸ªç§æœ‰æ–¹æ³•ï¼Ÿ</p>
<p>ç›¸ä¿¡å¤§å®¶å¿ƒé‡Œå°±ä¼šè¯´ï¼šâ€œè¿™è·Ÿæˆ‘æœ‰ä»€ä¹ˆå…³ç³»~~â€</p>
<p>å¯¹çš„ï¼Œä¸€å¼€å§‹æˆ‘ä¹Ÿæ˜¯è¿™æ ·çš„ã€‚ä½†æ˜¯ä¸€æ­¥æ­¥èµ°ä¸‹æ¥ï¼Œä½ ä¼šå‘ç°è¿™ä¸ªä¸œè¥¿æ ¹æœ¬æ²¡é‚£ä¹ˆéš¾ã€‚é‚£ä¹ˆï¼Œå°±è·Ÿæˆ‘ä¸€èµ·æ¥å­¦ä¹ ä¸‹è¿™å—çš„ç›¸å…³çŸ¥è¯†å§ã€‚</p>
<p>###2.1 ä»€ä¹ˆæ˜¯Xposeï¼Ÿ<br>
Xposed æ¡†æ¶æ˜¯ä¸€æ¬¾å¯ä»¥åœ¨ä¸ä¿®æ”¹ APK çš„æƒ…å†µä¸‹å½±å“ç¨‹åºè¿è¡Œ(ä¿®æ”¹ç³»ç»Ÿ)çš„æ¡†æ¶æœåŠ¡ï¼ŒåŸºäºå®ƒå¯ä»¥åˆ¶ä½œå‡ºè®¸å¤šåŠŸèƒ½å¼ºå¤§çš„æ¨¡å—ï¼Œä¸”åœ¨åŠŸèƒ½ä¸å†²çªçš„æƒ…å†µä¸‹åŒæ—¶è¿ä½œï¼Œåœ¨è¿™ä¸ªæ¡†æ¶ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åŠ è½½å¾ˆå¤šæ’ä»¶ App ï¼Œè¿™äº›æ’ä»¶ App å¯ä»¥ç›´æ¥æˆ–é—´æ¥åŠ«æŒã€ç¯¡æ”¹ã€ä¼ªé€ ä¸€äº›ä¿¡æ¯ã€‚</p>
<p>###2.2 å®ƒçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>####2.2.1 Xposedèµ„æº<br>
Â·XposedBridge.jarï¼šXposedBridge.jaræ˜¯Xposedæä¾›çš„jaræ–‡ä»¶ï¼Œè´Ÿè´£åœ¨Nativeå±‚ä¸FrameWorkå±‚è¿›è¡Œäº¤äº’ã€‚/system/bin/app_processè¿›ç¨‹å¯åŠ¨è¿‡ç¨‹ä¸­ä¼šåŠ è½½è¯¥jaråŒ…ï¼Œå…¶å®ƒçš„Modulesçš„å¼€å‘ä¸è¿è¡Œéƒ½æ˜¯åŸºäºè¯¥jaråŒ…çš„ã€‚</p>
<p>Â·Xposedï¼šXposedçš„C++éƒ¨åˆ†ï¼Œä¸»è¦æ˜¯ç”¨æ¥æ›¿æ¢/system/bin/app_processï¼Œå¹¶ä¸ºXposedBridgeæä¾›JNIæ–¹æ³•ã€‚</p>
<p>Â·XposedInstallerï¼šXposedçš„å®‰è£…åŒ…ï¼Œè´Ÿè´£é…ç½®Xposedå·¥ä½œçš„ç¯å¢ƒå¹¶ä¸”æä¾›å¯¹åŸºäºXposedæ¡†æ¶çš„Modulesçš„ç®¡ç†ã€‚</p>
<p>Â·XposedModsï¼šä½¿ç”¨Xposedå¼€å‘çš„ä¸€äº›Modulesï¼Œå…¶ä¸­AppSettingsæ˜¯ä¸€ä¸ªå¯ä»¥è¿›è¡Œæƒé™åŠ¨æ€ç®¡ç†çš„åº”ç”¨</p>
<p>####2.2.2 Zygote<br>
åœ¨Androidç³»ç»Ÿä¸­ï¼Œåº”ç”¨ç¨‹åºè¿›ç¨‹éƒ½æ˜¯ç”±Zygoteè¿›ç¨‹å­µåŒ–å‡ºæ¥çš„ï¼Œè€ŒZygoteè¿›ç¨‹æ˜¯ç”±Initè¿›ç¨‹å¯åŠ¨çš„ã€‚Zygoteè¿›ç¨‹åœ¨å¯åŠ¨æ—¶ä¼šåˆ›å»ºä¸€ä¸ªDalvikè™šæ‹Ÿæœºå®ä¾‹ï¼Œæ¯å½“å®ƒå­µåŒ–ä¸€ä¸ªæ–°çš„åº”ç”¨ç¨‹åºè¿›ç¨‹æ—¶ï¼Œéƒ½ä¼šå°†è¿™ä¸ªDalvikè™šæ‹Ÿæœºå®ä¾‹å¤åˆ¶åˆ°æ–°çš„åº”ç”¨ç¨‹åºè¿›ç¨‹é‡Œé¢å»ï¼Œä»è€Œä½¿å¾—æ¯ä¸€ä¸ªåº”ç”¨ç¨‹åºè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„Dalvikè™šæ‹Ÿæœºå®ä¾‹ã€‚è¿™ä¹Ÿæ˜¯Xposedé€‰æ‹©æ›¿æ¢app_processçš„åŸå› ã€‚</p>
<p>Zygoteè¿›ç¨‹åœ¨å¯åŠ¨çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†ä¼šåˆ›å»ºä¸€ä¸ªDalvikè™šæ‹Ÿæœºå®ä¾‹ä¹‹å¤–ï¼Œè¿˜ä¼šå°†Javaè¿è¡Œæ—¶åº“åŠ è½½åˆ°è¿›ç¨‹ä¸­æ¥ï¼Œä»¥åŠæ³¨å†Œä¸€äº›Androidæ ¸å¿ƒç±»çš„JNIæ–¹æ³•æ¥å‰é¢åˆ›å»ºçš„Dalvikè™šæ‹Ÿæœºå®ä¾‹ä¸­å»ã€‚æ³¨æ„ï¼Œä¸€ä¸ªåº”ç”¨ç¨‹åºè¿›ç¨‹è¢«Zygoteè¿›ç¨‹å­µåŒ–å‡ºæ¥çš„æ—¶å€™ï¼Œä¸ä»…ä¼šè·å¾—Zygoteè¿›ç¨‹ä¸­çš„Dalvikè™šæ‹Ÿæœºå®ä¾‹æ‹·è´ï¼Œè¿˜ä¼šä¸Zygoteä¸€èµ·å…±äº«Javaè¿è¡Œæ—¶åº“ã€‚è¿™ä¹Ÿå°±æ˜¯å¯ä»¥å°†XposedBridgeè¿™ä¸ªjaråŒ…åŠ è½½åˆ°æ¯ä¸€ä¸ªAndroidåº”ç”¨ç¨‹åºä¸­çš„åŸå› ã€‚XposedBridgeæœ‰ä¸€ä¸ªç§æœ‰çš„Nativeï¼ˆJNIï¼‰æ–¹æ³•hookMethodNativeï¼Œè¿™ä¸ªæ–¹æ³•ä¹Ÿåœ¨app_processä¸­ä½¿ç”¨ã€‚è¿™ä¸ªå‡½æ•°æä¾›ä¸€ä¸ªæ–¹æ³•å¯¹è±¡åˆ©ç”¨Javaçš„Reflectionæœºåˆ¶æ¥å¯¹å†…ç½®æ–¹æ³•è¦†å†™ã€‚</p>
<p>####2.2.3 Hook<br>
åœ¨Androidç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™ï¼Œzygoteè¿›ç¨‹åŠ è½½XposedBridgeå°†æ‰€æœ‰éœ€è¦æ›¿æ¢çš„Methodé€šè¿‡JNIæ–¹æ³•hookMethodNativeæŒ‡å‘Nativeæ–¹æ³•xposedCallHandlerï¼ŒxposedCallHandleråœ¨è½¬å…¥handleHookedMethodè¿™ä¸ªJavaæ–¹æ³•æ‰§è¡Œç”¨æˆ·è§„å®šçš„HookÂ Funcã€‚</p>
<p>XposedBridgeè¿™ä¸ªjaråŒ…å«æœ‰ä¸€ä¸ªç§æœ‰çš„æœ¬åœ°æ–¹æ³•ï¼šhookMethodNativeï¼Œè¯¥æ–¹æ³•åœ¨é™„åŠ çš„app_processç¨‹åºä¸­ä¹Ÿå¾—åˆ°äº†å®ç°ã€‚å®ƒå°†ä¸€ä¸ªæ–¹æ³•å¯¹è±¡ä½œä¸ºè¾“å…¥å‚æ•°ï¼ˆä½ å¯ä»¥ä½¿ç”¨Javaçš„åå°„æœºåˆ¶æ¥è·å–è¿™ä¸ªæ–¹æ³•ï¼‰å¹¶ä¸”æ”¹å˜Dalvikè™šæ‹Ÿæœºä¸­å¯¹äºè¯¥æ–¹æ³•çš„å®šä¹‰ã€‚å®ƒå°†è¯¥æ–¹æ³•çš„ç±»å‹æ”¹å˜ä¸ºnativeå¹¶ä¸”å°†è¿™ä¸ªæ–¹æ³•çš„å®ç°é“¾æ¥åˆ°å®ƒçš„æœ¬åœ°çš„é€šç”¨ç±»çš„æ–¹æ³•ã€‚æ¢è¨€ä¹‹ï¼Œå½“è°ƒç”¨é‚£ä¸ªè¢«hookçš„æ–¹æ³•æ—¶å€™ï¼Œé€šç”¨çš„ç±»æ–¹æ³•ä¼šè¢«è°ƒç”¨è€Œä¸ä¼šå¯¹è°ƒç”¨è€…æœ‰ä»»ä½•çš„å½±å“ã€‚åœ¨hookMethodNativeçš„å®ç°ä¸­ï¼Œä¼šè°ƒç”¨XposedBridgeä¸­çš„handleHookedMethodè¿™ä¸ªæ–¹æ³•æ¥ä¼ é€’å‚æ•°ã€‚handleHookedMethodè¿™ä¸ªæ–¹æ³•ç±»ä¼¼äºä¸€ä¸ªç»Ÿä¸€è°ƒåº¦çš„Dispatchä¾‹ç¨‹ï¼Œå…¶å¯¹åº”çš„åº•å±‚çš„C++å‡½æ•°æ˜¯xposedCallHandlerã€‚è€ŒhandleHookedMethodå®ç°é‡Œé¢ä¼šæ ¹æ®ä¸€ä¸ªå…¨å±€ç»“æ„hookedMethodCallbacksæ¥é€‰æ‹©ç›¸åº”çš„hookå‡½æ•°ï¼Œå¹¶è°ƒç”¨ä»–ä»¬çš„before,Â afterå‡½æ•°ã€‚</p>
<p>å½“å¤šæ¨¡å—åŒæ—¶Hookä¸€ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼ŒXposedä¼šè‡ªåŠ¨æ ¹æ®Moduleçš„ä¼˜å…ˆçº§æ¥æ’åºï¼Œè°ƒç”¨é¡ºåºå¦‚ä¸‹ï¼š</p>
<p>A.beforeÂ -&gt;Â B.beforeÂ -&gt;Â originalÂ methodÂ -&gt;Â B.afterÂ -&gt;Â A.after</p>
<p>###2.3 ä¸ºä»€ä¹ˆåæ¥åˆæ”¾å¼ƒäº†ï¼Ÿ<br>
ç ”ç©¶äº†ä¸€æ®µæ—¶é—´ä¹‹åï¼Œå¯»æ€å°±å¼€å§‹ä¸Šæ‰‹å§ã€‚<br>
####2.3.1 åˆ·æœºæˆæœ¬<br>
Xposedæ˜¯éœ€è¦rootæ‰‹æœºçš„ï¼Œäºæ˜¯å°±å¼€å§‹ç ”ç©¶åˆ·æœºï¼Œæˆ‘æ‰‹é‡Œæœ‰ä¸¤ä¸ªé”¤å­æ‰‹æœºï¼Œå…¶ä¸­ä¸€ä¸ªå‘¢ï¼Œå·²ç»è¢«æˆ‘å½»åº•åˆ·æˆäº†â€œé”¤å­â€ï¼Œå¹³æ—¶ç ¸ä¸ªæ ¸æ¡ƒå•¥çš„ç”¨èµ·æ¥è¿˜ç®—æ˜¯é¡ºæ‰‹ã€‚å¦å¤–ä¸€ä¸ªï¼Œåˆ·å®Œä¹‹åï¼Œæˆ‘æ‰‹æœºé‡Œé¢çš„ä¸œè¥¿è¿˜éƒ½éœ€è¦é‡æ–°å®‰è£…ï¼Œæœ‰äº›APKæ˜¯å¸‚åœºä¸Šå·²ç»æ‰¾ä¸åˆ°äº†ã€‚è€Œä¸”ï¼Œæˆ‘ä»¬ç›®å‰ä½¿ç”¨çš„æ‰‹æœºï¼Œä¸»æµçš„å°ç±³ã€OPPOã€VIVIã€åä¸ºï¼Œè¿™äº›æ‰‹æœºçš„åˆ·æœºæ–¹å¼å·²ç»ä¸å†åƒåŸæ¥é‚£æ ·ç®€å•ï¼Œä¸‹è½½ä¸€ä¸ªå®‰è£…åŒ…ï¼ŒåŒæ—¶æŒ‰ä½ç”µæºé”®+ Home + éŸ³é‡â€œ+â€ç­‰ä¸€ä¼šé‚£ä¹ˆç®€å•äº†ã€‚è€Œä¸”åˆ·å®Œä¹‹åï¼Œä¸æ˜¯NFCä¸å¥½ç”¨ï¼Œå°±æ˜¯WIFIåäº†ã€‚è¦æ˜¯æ²¡æœ‰ä¸€æ¬¾å¯è¦å¯ä¸è¦çš„é—²ç½®æ‰‹æœºï¼ŒçœŸçš„ä¸å»ºè®®åˆ·ã€‚<br>
####2.3.2 è„±å£³ä¹Ÿæ˜¯ä¸€ä»¶éº»çƒ¦äº‹<br>
æ¥ä¸‹æ¥å†æƒ³ï¼Œæˆ‘ä»¬çªç ´äº†ç§ç§å›°éš¾ï¼Œå®Œæˆäº†åˆ·æœºã€‚ä½†æ˜¯å½“æˆ‘ä»¬éœ€è¦Hookæ–¹æ³•çš„æ—¶å€™åˆä¼šçŠ¯éš¾ï¼Œå› ä¸ºç°åœ¨åŠ å£³çš„APKï¼Œåç¼–è¯‘ä¹‹åå¤–é¢å°±ä¸€ä¸¤ä¸ªç±»ï¼Œæ ¹æœ¬æ— ä»ä¸‹æ‰‹ï¼Œè¿˜éœ€è¦å†ç ”ç©¶è„±å£³ã€‚</p>
<p>æ¸æ¸åœ°ï¼Œæˆ‘å°±å‘ç°åŸæœ¬æˆ‘çš„ç›®æ ‡ï¼šæƒ³çœ‹çœ‹å¦‚ä½•æ¨¡æ‹Ÿé»‘äº§å»Hookä¸€ä¸ªAPIï¼Œä½†æ˜¯è¿™æ ·çš„è·¯è®©æˆ‘è¶Šèµ°è¶Šè¿œã€‚æ–¹å‘æ²¡é”™ï¼Œä½†æ˜¯ä¸ç¦è§‰å¾—è¿™æ˜¯åœ¨æµªè´¹æ—¶é—´ã€‚éš¾é“å°±çœŸçš„æ²¡æœ‰åŠæ³•äº†ä¹ˆï¼Ÿ</p>
<p>æ¥ä¸‹æ¥å°±æ¥ä»‹ç»ä¸€ä¸‹ï¼Œä»Šå¤©çš„çŒªè„šï¼ŒVirtual Xposed~~<br>
##3. Virutal Xposed<br>
å¯¹äºæˆ‘è¿™æ ·çš„â€œåˆšéœ€â€ï¼Œå®ƒæ˜¯ä¸€æ¬¾ç¥å™¨ã€‚ä¸ºä»€ä¹ˆï¼Œé¦–å…ˆå®ƒä¸éœ€è¦åˆ·æœºï¼Œå®ƒçš„è„±å£³ä¹Ÿæ˜¯éå¸¸çš„ç®€å•ã€‚å°±è¿™ä¹ˆç®€å•çš„ä¸¤ç‚¹ï¼Œå®Œå…¨è§£å†³äº†æˆ‘çš„ç—›ç‚¹ã€‚<br>
###3.1 å®ƒä¸Xposedä»åŸç†ä¸Šçš„åŒºåˆ«<br>
VirtualXposed å¹¶æœªå¯¹ç³»ç»Ÿåº•å±‚è¿›è¡Œä»»ä½•ä¿®æ”¹ï¼Œä¹Ÿæ²¡æœ‰åˆ©ç”¨ä»€ä¹ˆç¥å¥‡çš„æ¼æ´ã€‚å®ƒçš„å·¥ä½œåŸç†æœ‰ç‚¹åƒé‚£äº›åŒå¼€è½¯ä»¶ã€‚</p>
<p>VirtualXposed æ˜¯é€šè¿‡åœ¨ä½ çš„æ‰‹æœºé‡Œåˆ›å»ºä¸€ä¸ªã€Œè™šæ‹Ÿç¯å¢ƒã€ï¼Œç„¶ååœ¨æ­¤è™šæ‹Ÿç¯å¢ƒä¸­å¯ç”¨ Xposedã€‚</p>
<p>###3.2 FDex2</p>
<p>###3.3 Demo<br>
##å·å·æä¸€æ³¢58è¯•è¯•</p>
<p>å‚è€ƒæ–‡ç« ï¼š<br>
http://yx.bsh.me/23278.html<br>
https://mp.weixin.qq.com/s/PG7ykzTWkw4tARjp0yKeAQ<br>
https://mp.weixin.qq.com/s/AlZMhMZ-SFOxRMtXfcev1g<br>
https://blog.csdn.net/ascii2/article/details/47974217<br>
https://blog.csdn.net/wxyyxc1992/article/details/17320911</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Flutteræ¥å…¥ç¬¬ä¸‰æ–¹SDK]]></title>
        <id>https://Mozziehh.github.io/post/flutter-jie-ru-di-san-fang-sdk</id>
        <link href="https://Mozziehh.github.io/post/flutter-jie-ru-di-san-fang-sdk">
        </link>
        <updated>2019-11-22T00:35:01.000Z</updated>
        <content type="html"><![CDATA[<p>#Flutteræ¥å…¥ç¬¬ä¸‰æ–¹SDK<br>
æœ€è¿‘å¼€å§‹ä½¿ç”¨Flutterï¼Œå‘ç°æˆ‘ä»¬å¯ä»¥å†™å‡ºåŸç”Ÿçš„é¡µé¢ï¼Œä½¿ç”¨Dartè¯­è¨€å®Œæˆé€»è¾‘çš„ç¼–ç¨‹ã€‚ä½†æ˜¯å‡å¦‚æˆ‘ä»¬éœ€è¦æ¥å…¥ä¸€ä¸ªç¬¬ä¸‰æ–¹SDKï¼Œè¿™ä¸ªæ—¶å€™åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ<br>
##æ¥å…¥ç¬¬ä¸‰æ–¹SDK-ç™»å½•SDK<br>
ç™»å½•SDKæ˜¯58å‡ºçš„ä¸€æ¬¾é€‚ç”¨äºå…¨å…¬å¸çš„ä¸€å¥—ç™»å½•ä½“ç³»ã€‚ç™»å½•SDKæ˜¯ä»¥ä¸€ä¸ªAARçš„å½¢å¼æä¾›çš„ã€‚è¯¥aaråŒ…å«classes.jarã€èµ„æºæ–‡ä»¶ã€assetsæ–‡ä»¶ã€AndroidManifest.xmlä»¥åŠR.txtæ–‡ä»¶ã€‚</p>
<p>##Javaçš„æ¥å…¥æ–¹å¼<br>
é¦–å…ˆè¿™æ˜¯ä¸€ä¸ªå…¨æ–°çš„æŒ‘æˆ˜ï¼Œæ¥åˆ°æ‰‹ä¹‹åå®Œå…¨ä¸çŸ¥é“è¯¥æ€ä¹ˆå¼„ã€‚<br>
è¿™é‡Œæˆ‘ä»¬å…ˆå›é¡¾ä¸€ä¸‹ï¼Œåœ¨ä½¿ç”¨Javaå¼€å‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯å¦‚ä½•å¼•å…¥AARçš„ï¼š</p>
<blockquote>
<p>1.é…ç½®build.gradleæ–‡ä»¶ï¼Œæ·»åŠ implementation 'xxx:xxxx:'</p>
<p>2.ç¼–è¯‘</p>
<p>3.è°ƒç”¨</p>
</blockquote>
<p>##Flutterçš„æ¥å…¥æ–¹å¼<br>
é‚£ä¹ˆFlutterçš„æ¥å…¥æ–¹å¼ä¸Javaçš„æ–¹å¼æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿæˆ‘ä»¬ä¹Ÿè¯•ç€æŒ‰ç…§ä¸Šé¢çš„ä¸‰ç§æ–¹å¼æ¥åšä¸€æ¬¡:</p>
<p>###é…ç½®AAR &amp; ç¼–è¯‘<br>
è¿™ä¸ªé…ç½®AARçš„æ–¹å¼æœ‰ç‚¹è¯¡å¼‚ï¼Œéœ€è¦åœ¨File -&gt; new -&gt; new Module -&gt; Import .AAR packageï¼Œæ·»åŠ ä¾èµ–ä¹‹åï¼Œå®ƒä¼šè‡ªåŠ¨ç¼–è¯‘ï¼Œç„¶åä½ å°±ä¼šå‘ç°å¯ä»¥æ‰“å¼€äº†ã€‚</p>
<p>ç„¶é¹…ï¼Œè¿™ç§æ–¹å¼ï¼Œæ˜¯é”™è¯¯çš„ã€‚å› ä¸ºä½ æŠŠè¿™ä¸ªAARå¼•å…¥åˆ°Flutterçš„å·¥ç¨‹é‡Œé¢ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å¼•å…¥åˆ°androidçš„é¡¹ç›®ä¸­æ¥ï¼Œå› ä¸ºæˆ‘å‘ç°è°ƒç”¨çš„æ—¶å€™ä¾ç„¶è°ƒç”¨ä¸äº†ã€‚</p>
<p>å¦å¤–ï¼Œæˆ‘å‘ç°åœ¨androidç›®å½•ä¸‹æœ‰ä¸€ä¸ªMainActivity.javaæ–‡ä»¶ï¼Œå¤§æ¦‚ç‡å°±æ˜¯åœ¨è¿™é‡Œæ·»åŠ è·ŸFlutteré¡µé¢çš„äº¤äº’äº†ã€‚<br>
å¯æ˜¯æˆ‘å‘ç°è¿™ä¸ªç±»ç¼–è¾‘ä¹‹åæ²¡æœ‰ä»»ä½•ä»£ç æç¤ºï¼Œç›´è§‰å‘Šè¯‰æˆ‘è¿™é‡Œç¼ºä¸€äº›ä¸œè¥¿ï¼Œç¼ºçš„æ˜¯androidçš„ç¼–è¯‘ç¯å¢ƒï¼š</p>
<p>ç­”æ¡ˆå°±æ˜¯ï¼šåŒå¼€</p>
<p>é€šè¿‡File -&gt; Opençš„å½¢å¼ï¼Œç”¨android studioå†æ‰“å¼€ä¸€ä¸ªç›®å½•å¼•å…¥androidå·¥ç¨‹ã€‚</p>
<p>æ¥ä¸‹æ¥çš„ä¾èµ–å…³ç³»ä¹Ÿå°±å˜å¾—é¡ºå…¶è‡ªç„¶ï¼ŒåŒå¼€å›ºç„¶éº»çƒ¦ï¼Œä½†æ˜¯å½“ä½ ç”¨flutterè¿è¡Œçš„é‚£ä¸€åˆ»ï¼Œä½ å°±å‘ç°ï¼Œä¸€åˆ‡éƒ½æ˜¯å€¼å¾—çš„ã€‚</p>
<h3 id="æ¨¡å—è®¾è®¡">æ¨¡å—è®¾è®¡</h3>
<p>å°†ç™»å½•SDKçš„æ¨¡å—å¼•å…¥ï¼Œä½¿å¾—Flutterå†…éƒ¨å¯ä»¥é€šè¿‡MethodChannelæ¥è°ƒç”¨Androidçš„æ–¹æ³•</p>
<p>ç™»å½•SDKçš„ç‰¹ç‚¹ï¼š</p>
<p>1.æ— éœ€å®ç°UIç•Œé¢ï¼›</p>
<p>2.éœ€è¦è®¾ç½®é¡µé¢ç›‘å¬ï¼›</p>
<p>3.æ¥æ”¶å›è°ƒä¹‹åå¯ä»¥åŠæ—¶å±•ç¤ºåˆ°ç”¨æˆ·ç•Œé¢ä¸Š</p>
<h3 id="ç™»å½•sdkçš„å¼•å…¥">ç™»å½•SDKçš„å¼•å…¥</h3>
<p>ç”±äºFlutteré»˜è®¤ä¸æ”¯æŒ<code>armeabi</code>çš„CPUæ¶æ„ï¼Œå¹¶ä¸”ç”±äºæˆ‘ä»¬æ˜¯å¹¶è¡Œå¼€å‘ï¼Œæ‰€ä»¥æ”¹åŠ¨å¤ªå¤šé…ç½®æ–‡ä»¶ä¹Ÿä¼šå¢åŠ åŒå­¦ä»¬çš„å­¦ä¹ æˆæœ¬ã€‚æ‰€ä»¥ï¼Œè¿™é‡Œæˆ‘ä»¬ç›´æ¥è®©ç™»å½•SDKæä¾›äº†æ”¯æŒäº†64ä½CPUæ¶æ„æµ‹è¯•AARã€‚<br>
åŒæ—¶ï¼Œæˆ‘ä»¬åœ¨androidç›®å½•ä¸‹ä¿®æ”¹äº†å¦‚ä¸‹é…ç½®ï¼š</p>
<p>androidç›®å½•ä¸‹,ä¿®æ”¹äº†build.gradleæ–‡ä»¶ï¼š</p>
<pre><code>
buildscript {
    repositories {
        maven { url 'https://maven.aliyun.com/repository/google' }
        maven { url 'https://maven.aliyun.com/repository/jcenter' }
        maven { url 'http://maven.aliyun.com/nexus/content/groups/public' }
        mavenLocal()
        maven {
            url &quot;http://artifactory.58corp.com:8081/artifactory/android-public&quot;
        }
        google()
        jcenter()
    }

    dependencies {
        classpath 'com.android.tools.build:gradle:3.2.1'
    }
}

</code></pre>
<p>appç›®å½•ä¸‹ï¼Œä¿®æ”¹äº†build.gradleæ·»åŠ äº†å¦‚ä¸‹ä¾èµ–<code>è¿™äº›ä¾èµ–éƒ½æ˜¯å¿…é¡»çš„</code>ï¼š</p>
<pre><code>implementation 'com.wuba.wuxian.sdk:login:2.1.6.4.1-test'
    implementation 'com.wuba.wuxian.third:weichatsoter:1.3.10'
    implementation 'com.wuba.certify:deviceid:2.2.11'
    implementation 'com.wuba.xxzl:fastlogin:2.0.2.0'
    implementation 'io.reactivex:rxjava:1.3.8'
    implementation 'io.reactivex:rxandroid:1.2.1'
</code></pre>
<h3 id="flutteræ·»åŠ è°ƒç”¨">Flutteræ·»åŠ è°ƒç”¨</h3>
<p>åœ¨flutterçš„é¡µé¢ä¸Šï¼Œå¼€å‘è€…å¯ä»¥éšä¾¿ä½¿ç”¨UIå…ƒç´ ï¼Œé€šè¿‡MethodChannelå»ºç«‹å›è°ƒé€šé“ï¼Œåœ¨UIæ§ä»¶ä¸Šè®¾ç½®ç‚¹å‡»äº‹ä»¶è°ƒèµ·ç™»å½•å¹¶ç›‘å¬ç™»å½•ç»“æœã€<br>
é€šè¿‡platform.invokeMethodè°ƒèµ·å¯¹åº”çš„ç™»å½•æ–¹å¼ã€setStateæ¥è®¾ç½®ç»“æœã€flutterç›‘å¬å˜åŒ–åï¼Œä¼šåˆ·æ–°å¹¶å±•ç¤ºï¼›</p>
<h4 id="flutterçš„è°ƒç”¨">Flutterçš„è°ƒç”¨</h4>
<p>ä¸»è¦æ˜¯åœ¨<code>WubaLoginClientTestComponent</code>ç±»é‡Œé¢ï¼›</p>
<pre><code>///å®šä¹‰ä¸€ä¸ªMethodChannel
static const platform = const MethodChannel('com.wuba.flutter.flutter_hades/login');

///å…·ä½“çš„è°ƒç”¨æ–¹æ³•
child: GestureDetector(
              child: new Row(
                children: &lt;Widget&gt;[
                  new Text(
                    'è°ƒèµ·58ç™»å½•: ' + _loginResult,
                    style: new TextStyle(
                        color: const Color(0xff353535), fontSize: 16.0),
                  ),
                ],
              ),
              onTap: _startWubaLogin,
            ),
            
///_loginResult ï¼šæ˜¯ç™»é™†çš„ç»“æœï¼›
///_startWubaLogin ï¼šæ˜¯è°ƒç”¨çš„æ–¹æ³•ï¼›

</code></pre>
<h4 id="æ¥æ”¶å›è°ƒåˆ·æ–°ui">æ¥æ”¶å›è°ƒåˆ·æ–°UI</h4>
<pre><code>///_loginResult ï¼šæ˜¯ç™»é™†çš„ç»“æœï¼›
///_startWubaLogin ï¼šæ˜¯è°ƒç”¨çš„æ–¹æ³•ï¼›

  String _loginResult = '';
  Future&lt;Null&gt; _startWubaLogin() async {
    String loginResult;
    try{
      loginResult = await platform.invokeMethod('wubaLogin');
    } on PlatformException catch (e){
      loginResult = &quot;error&quot;;
    }

    setState(() {
      _loginResult = loginResult;
    });
  }
</code></pre>
<h3 id="androidæ¥æ”¶è°ƒç”¨">Androidæ¥æ”¶è°ƒç”¨</h3>
<h4 id="åˆå§‹åŒ–">åˆå§‹åŒ–</h4>
<p>ç™»å½•SDKçš„åˆå§‹åŒ–å¯ä»¥æŒ‰éœ€è¦é€‰å–æ„å»ºé¡¹ï¼Œé€šè¿‡æ„å»ºè€…æ¨¡å¼æ¥æ„å»ºï¼ˆç”±äºç¬¬ä¸‰æ–¹ç™»å½•å¾®ä¿¡ç™»å½•éœ€è¦æ­£å¼ç­¾åï¼Œæ‰€ä»¥å¼•å…¥ç›®å‰ä¹Ÿæ— æ³•è°ƒç”¨ï¼Œæ‰€ä»¥æš‚æ—¶å…ˆä¸å¼•å…¥ï¼‰ï¼š</p>
<pre><code>        LoginSdk.LoginConfig loginConfig = new LoginSdk.LoginConfig()
                //æ ¹æ®ç»Ÿä¸€å¼€å…³ï¼Œä¸Šçº¿åå…³é—­log
                .setLogLevel(ILogger.STANDARD_LOG)
                //å¿…é€‰ï¼Œè®¾ç½®product id, ç”±äº§å“ç»Ÿä¸€çº¦å®š
                .setProductId(&quot;58app&quot;)
                .setLogoResId(R.drawable.wb_new_icon)
                //å¯é€‰ï¼Œå¦‚æœé›†æˆä¸‰æ–¹ç™»å½•ï¼Œåˆ™è®¾ç½®ç›¸åº”çš„å¼€æ”¾å¹³å°key
//                .setThirdLoginConfig(WubaSettingCommon.QQ_API_KEY, WubaSettingCommon.CONSUMER_KEY_WEIXIN, WubaSettingCommon.CONSUMER_KEY_SINA, WubaSettingCommon.REDIRECT_URL_SINA)
                .setNeedInitFaceVerify(true, &quot;Xenh6dVg&quot;)
                .setIsLoginRelyOnUserInfo(true)
                .setGatewayLoginAppId(&quot;ef2b526cdb4948b1bf7556f23d0a15da&quot;);
        //åˆå§‹åŒ–
        LoginSdk.register(this, loginConfig);
</code></pre>
<h4 id="è®¾ç½®å›è°ƒ">è®¾ç½®å›è°ƒ</h4>
<p>è®¾ç½®é€šé“ï¼š</p>
<pre><code>  private static final String CHANNEL = &quot;com.wuba.flutter.flutter_hades/login&quot;;
</code></pre>
<p>æ¥æ”¶Flutterå‘é€è¿‡æ¥çš„è°ƒç”¨ï¼Œå¹¶è°ƒç”¨ç™»å½•SDKï¼š</p>
<pre><code>LoginClient.register(mLoginCallback);
    new MethodChannel(getFlutterView(), CHANNEL).setMethodCallHandler(
            new MethodChannel.MethodCallHandler() {
              @Override
              public void onMethodCall(MethodCall call, MethodChannel.Result result) {
                // Note: this method is invoked on the main thread.
                if(call.method.equals(&quot;wubaLogin&quot;)){
                  LoginClient.launch(MainActivity.this, Request.LOGIN);
                  mResult = result;
                } else if(call.method.equals(&quot;wubaPhoneLogin&quot;)){
                  LoginClient.launch(MainActivity.this, Request.PHONE_LOGIN);
                  mResult = result;
                } else if(call.method.equals(&quot;wubaRegister&quot;)){
                  LoginClient.launch(MainActivity.this, Request.REGISTER);
                  mResult = result;
                } else if(call.method.equals(&quot;getUserID&quot;)){
                  result.success(LoginClient.getUserID(MainActivity.this));
                } else if(call.method.equals(&quot;getUserPPU&quot;)){
                  result.success(LoginClient.getTicket(MainActivity.this, &quot;.58.com&quot;, &quot;PPU&quot;));
                } else if(call.method.equals(&quot;getUserName&quot;)){
                  result.success(LoginClient.getUserName(MainActivity.this));
                } else {
                  result.notImplemented();
                }
              }
            });
</code></pre>
<p>é¡µé¢å¯ä»¥é”€æ¯åï¼Œç»™å‡ºå»å›è°ƒï¼š</p>
<pre><code>LoginCallback mLoginCallback = new SimpleLoginCallback(){
    @Override
    public void onLogin58Finished(boolean isSuccess, String msg, LoginSDKBean loginSDKBean) {
      super.onLogin58Finished(isSuccess, msg, loginSDKBean);
        if(mResult != null){
          if(isSuccess){
            mResult.success(msg);
          }
        }
    }
  };
</code></pre>
<h2 id="ç»†è¯´methodchannel">ç»†è¯´MethodChannel</h2>
<h3 id="ä»€ä¹ˆæ˜¯methodchannel">ä»€ä¹ˆæ˜¯MethodChannelï¼Ÿ</h3>
<p>ã€ŠFlutterä¸­æ–‡ç½‘ã€‹ä¸Šé¢æè¿°çš„æ ‡é¢˜æ˜¯ï¼šæ’ä»¶å¼€å‘ï¼šAndroidç«¯APIå®ç°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒMethodChannelæ˜¯Flutterå®ç°ä¸Androidé€šè¿‡APIäº¤äº’çš„æ’ä»¶ã€‚é€šè¿‡ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ¸…æ¥šçš„å›é¡¾å®ƒçš„ä¸€äº›ç‰¹ç‚¹ï¼ŒFlutterå³æ—¶è°ƒç”¨ï¼ŒAndroidå¾—åˆ°åé¦ˆï¼ŒFlutterè¿›è¡ŒUIå±•ç¤ºï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<figure data-type="image" tabindex="1"><img src="flutter_api.png" alt="flutter_api.png"></figure>
<h3 id="å®ƒçš„ä¸»è¦æµç¨‹æ˜¯ä»€ä¹ˆ">å®ƒçš„ä¸»è¦æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<blockquote>
<p>1.åœ¨flutterç«¯ï¼šè®¾ç½®ä¸€ä¸ªMethodChannelï¼šstatic const platform = const MethodChannel('samples.flutter.io/battery');</p>
<p>2.åœ¨flutterç«¯ï¼šé€šè¿‡invokeæ–¹æ³•è°ƒç”¨ï¼šawait platform.invokeMethod('getBatteryLevel');</p>
<p>3.åœ¨flutterç«¯ï¼šå†™UIæ¥æ¥æ”¶å›è°ƒ<br>
children: [<br>
new RaisedButton(<br>
child: new Text('Get Battery Level'),<br>
onPressed: _getBatteryLevel,<br>
),<br>
new Text(_batteryLevel),<br>
],</p>
<p>4.åœ¨androidç«¯ï¼šè°ƒç”¨setMethodCallHandleræ–¹æ³•ï¼š</p>
<p>new MethodChannel(getFlutterView(), CHANNEL).setMethodCallHandler(<br>
new MethodCallHandler() {<br>
@Override<br>
public void onMethodCall(MethodCall call, Result result) {<br>
// TODO<br>
}<br>
});</p>
<p>5.åœ¨androidç«¯ï¼šå®ç°onMethodCallå›è°ƒï¼š</p>
<p>@Override<br>
public void onMethodCall(MethodCall call, Result result) {<br>
if (call.method.equals(&quot;getBatteryLevel&quot;)) {<br>
int batteryLevel = getBatteryLevel();<br>
if (batteryLevel != -1) {<br>
result.success(batteryLevel);<br>
} else {<br>
result.error(&quot;UNAVAILABLE&quot;, &quot;Battery level not available.&quot;, null);<br>
}<br>
} else {<br>
result.notImplemented();<br>
}<br>
}</p>
</blockquote>
<h3 id="å®ƒçš„åŸç†æ˜¯ä»€ä¹ˆ">å®ƒçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>é’ˆå¯¹ä¸Šé¢çš„æµç¨‹æˆ‘ä»¬æœ‰ä¸¤ä¸ªç–‘é—®ï¼š</p>
<ol>
<li>
<p>platform.invokeMethodæ€ä¹ˆæŠŠå¯¹åº”çš„methodè°ƒèµ·æ¥çš„ï¼Ÿ</p>
</li>
<li>
<p>result.successæ˜¯å¦‚ä½•å›è°ƒåˆ°</p>
</li>
</ol>
<h3 id="æºç é˜…è¯»">æºç é˜…è¯»</h3>
<p>ä¸Šæºç ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸ªå›¾ï¼š</p>
<p>å®˜æ–¹è¯´æ˜ï¼š</p>
<blockquote>
<p>A named channel for communicating with platform plugins using asynchronous method calls.Method calls are encoded into binary before &gt;being sent, and binary results received are decoded into Dart values. The [MethodCodec] used must be compatible with the one used by the platform plugin. This can be achieved by creating a method channel counterpart of this channel on the platform side. The Dart type of arguments and results is <code>dynamic</code>, but only values supported by the specified [MethodCodec] can be used. The use of unsupported values should be considered programming errors, and will result in exceptions being thrown. The null value is supported for all codecs. The logical identity of the channel is given by its name. Identically named channels will interfere with each other's communication.</p>
</blockquote>
<blockquote>
<p>å¤§æ¦‚çš„æ„æ€ï¼šå®šä¹‰ä¸€ä¸ªç®¡é“ï¼Œåˆ©ç”¨å¼‚æ­¥æ–¹æ³•è·Ÿå¹³å°æ’ä»¶è¿›è¡Œäº¤äº’ã€‚æ–¹æ³•é‡Œé¢çš„å‚æ•°å¿…é¡»æ˜¯ä¸€ä¸ªç‰¹å®šç‹¬ä¸€æ— äºŒçš„ï¼Œä¸èƒ½æ˜¯ç‰¹æ®Šå­—ç¬¦æˆ–è€…å·²ç»å®šä¹‰å¥½çš„æœ‰å«ä¹‰çš„æ ‡è¯†ç¬¦ã€‚</p>
</blockquote>
<p>MethodChannelä¸€å…±æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼šString nameã€StandardMethodCodec codecã€binaryMessengerï¼›</p>
<p>å…¶ä¸­nameæ˜¯å¿…é€‰å‚æ•°ã€åé¢ä¸¤ä¸ªæ˜¯å¯é€‰å‚æ•°ï¼›</p>
<p>name:æ ¼å¼é€šå¸¸æ˜¯ï¼šåŒ…å/æ–¹æ³•åï¼Œä¾‹å¦‚ï¼š'com.wuba.flutter.flutter_hades/login'ï¼›</p>
<p>StandardMethodCodec codecï¼šæ ‡å‡†æ–¹æ³•ç¼–ç ï¼Œæœ‰ç‚¹ç±»ä¼¼äºJavaçš„åºåˆ—åŒ–ï¼Œé‡Œé¢æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼šByteData encodeMessage(T message);å’ŒT decodeMessage(ByteData message);</p>
<p>BinaryMessenger ï¼šè¿™ä¸ªç±»å°±æ˜¯ç”¨æ¥è¿½è¸ªç®¡é“çš„messageçš„ï¼Œåˆ†å‘å¹¶è®°å½•æ¯ä¸€ä¸ªæ³¨å†Œäº†ç®¡é“çš„handlerå¹¶å›è°ƒï¼›</p>
<h4 id="platforminvokemethod">platform.invokeMethod</h4>
<p>MethodHandleræä¾›äº†ä¸€ä¸ªæ–¹æ³•invokeMethodï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯è°ƒç”¨çš„å…¥å£å‡½æ•°ï¼š</p>
<pre><code>@optionalTypeArgs
  Future&lt;T&gt; invokeMethod&lt;T&gt;(String method, [ dynamic arguments ]) async {
    assert(method != null);
    final ByteData result = await binaryMessenger.send(
      name,
      codec.encodeMethodCall(MethodCall(method, arguments)),
    );
    if (result == null) {
      throw MissingPluginException('No implementation found for method $method on channel $name');
    }
    final T typedResult = codec.decodeEnvelope(result);
    return typedResult;
  }
</code></pre>
<p>æˆ‘ä»¬ä¸»è¦æ˜¯çœ‹è¿™ä¸ªbinaryMessenger.sendçš„æ–¹æ³•ï¼š</p>
<pre><code>@override
  Future&lt;ByteData&gt; send(String channel, ByteData message) {
    final MessageHandler handler = _mockHandlers[channel];
    if (handler != null)
      return handler(message);
    return _sendPlatformMessage(channel, message);
  }
</code></pre>
<p>é€šè¿‡Mapå­˜å‚¨åˆ°key-valueï¼Œkeyä»£è¡¨çš„æ˜¯channelï¼Œå°±æ˜¯æˆ‘ä»¬åˆšæ‰è®¾ç½®çš„MethodChannelä¸­çš„nameï¼Œvalueæ˜¯handlerï¼Œè¿™ä¸ªå°±ç›¸å½“äºtrackã€‚</p>
<p>æ¥ä¸‹æ¥è°ƒç”¨Flutterçš„UIé¡¶å±‚çš„å®ç°æ–¹å¼ï¼š</p>
<pre><code>ui.window.sendPlatformMessage(channel, message, (ByteData reply) {
      try {
        completer.complete(reply);
      } catch (exception, stack) {
        FlutterError.reportError(FlutterErrorDetails(
          exception: exception,
          stack: stack,
          library: 'services library',
          context: ErrorDescription('during a platform message response callback'),
        ));
      }
    });
</code></pre>
<p>ui.windowç±»ä¼¼äºandroidé‡Œé¢çš„windowï¼Ÿ</p>
<pre><code>void sendPlatformMessage(String name,
                           ByteData data,
                           PlatformMessageResponseCallback callback) {
    final String error =
        _sendPlatformMessage(name, _zonedPlatformMessageResponseCallback(callback), data);
    if (error != null)
      throw Exception(error);
  }
</code></pre>
<p>è·Ÿåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å‘ç°è°ƒç”¨çš„Nativeçš„æ–¹æ³•ï¼š</p>
<pre><code>String _sendPlatformMessage(String name,
                              PlatformMessageResponseCallback callback,
                              ByteData data) native 'Window_sendPlatformMessage';
</code></pre>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹c++æ˜¯æ€ä¹ˆå†™çš„ï¼š</p>
<pre><code>Dart_Handle SendPlatformMessage(Dart_Handle window,
                                const std::string&amp; name,
                                Dart_Handle callback,
                                const tonic::DartByteData&amp; data) {
  UIDartState* dart_state = UIDartState::Current();

  ...

  fml::RefPtr&lt;PlatformMessageResponse&gt; response;
  if (!Dart_IsNull(callback)) {
    response = fml::MakeRefCounted&lt;PlatformMessageResponseDart&gt;(
        tonic::DartPersistentValue(dart_state, callback),
        dart_state-&gt;GetTaskRunners().GetUITaskRunner());
  }
  if (Dart_IsNull(data.dart_handle())) {
    dart_state-&gt;window()-&gt;client()-&gt;HandlePlatformMessage(
        fml::MakeRefCounted&lt;PlatformMessage&gt;(name, response));
  } else {
    const uint8_t* buffer = static_cast&lt;const uint8_t*&gt;(data.data());

    // dataæ•°æ®éƒ¨ä½nullï¼Œä¼šèµ°ä¸‹é¢è¿™å—ä»£ç 
    dart_state-&gt;window()-&gt;client()-&gt;HandlePlatformMessage(
        fml::MakeRefCounted&lt;PlatformMessage&gt;(
            name, std::vector&lt;uint8_t&gt;(buffer, buffer + data.length_in_bytes()),
            response));
  }

  return Dart_Null();
}
</code></pre>
<p>æˆ‘ä»¬çœ‹è¿™é‡Œæœ‰ä¸€æ®µä»£ç ï¼Œå«åšHandlePlatformMessageï¼Œè¿™æ®µä»£ç åœ¨<code>../engine/shell/common/engine.cc</code></p>
<pre><code>void Engine::HandlePlatformMessage(
    fml::RefPtr&lt;blink::PlatformMessage&gt; message) {
  if (message-&gt;channel() == kAssetChannel) {
    HandleAssetPlatformMessage(std::move(message));
  } else {
    delegate_.OnEngineHandlePlatformMessage(std::move(message));
  }
}

void Shell::OnEngineHandlePlatformMessage(
    fml::RefPtr&lt;blink::PlatformMessage&gt; message) {
    
  ...
  task_runners_.GetPlatformTaskRunner()-&gt;PostTask(
      [view = platform_view_-&gt;GetWeakPtr(), message = std::move(message)]() {
        if (view) {
          view-&gt;HandlePlatformMessage(std::move(message));
        }
      });
}
</code></pre>
<p>platform_view_æ˜¯ä¸€ä¸ªç»§æ‰¿äº†PlatformViewç±»çš„PlatformViewAndroidå¯¹è±¡ï¼Œè¯¥å¯¹è±¡åœ¨åˆ›å»ºAndroidShellHolderå¯¹è±¡æ—¶è¢«åˆ›å»ºã€‚view-&gt;HandlePlatformMessageæ‰§è¡Œä»¥ä¸‹æ–¹æ³•ï¼Œ<code>../engine/shell/platform/android/platform_view_android.cc</code></p>
<pre><code>void PlatformViewAndroid::HandlePlatformMessage(
    fml::RefPtr&lt;blink::PlatformMessage&gt; message) {
  JNIEnv* env = fml::jni::AttachCurrentThread();
  fml::jni::ScopedJavaLocalRef&lt;jobject&gt; view = java_object_.get(env);
  if (view.is_null())
    return;

  int response_id = 0;
  if (auto response = message-&gt;response()) {
    response_id = next_response_id_++;
    pending_responses_[response_id] = response;
  }
  auto java_channel = fml::jni::StringToJavaString(env, message-&gt;channel());
  if (message-&gt;hasData()) {
    fml::jni::ScopedJavaLocalRef&lt;jbyteArray&gt; message_array(
        env, env-&gt;NewByteArray(message-&gt;data().size()));
    env-&gt;SetByteArrayRegion(
        message_array.obj(), 0, message-&gt;data().size(),
        reinterpret_cast&lt;const jbyte*&gt;(message-&gt;data().data()));
    message = nullptr;

    // This call can re-enter in InvokePlatformMessageXxxResponseCallback.
    FlutterViewHandlePlatformMessage(env, view.obj(), java_channel.obj(),
                                     message_array.obj(), response_id);
  } else {
    ...
  }
}
</code></pre>
<p>äºæ˜¯ï¼Œæˆ‘ä»¬æœ€ç»ˆè·Ÿåˆ°äº†JNIçš„æœ€ç»ˆæ–¹æ³•ï¼Œå®ƒè°ƒç”¨çš„æ˜¯<code>FlutterJNI.java</code>ä¸­çš„handlePlatformMessageï¼š</p>
<pre><code>static jmethodID g_handle_platform_message_method = nullptr;
void FlutterViewHandlePlatformMessage(JNIEnv* env,
                                      jobject obj,
                                      jstring channel,
                                      jobject message,
                                      jint responseId) {
  env-&gt;CallVoidMethod(obj, g_handle_platform_message_method, channel, message,
                      responseId);
  FML_CHECK(CheckException(env));
}

private void handlePlatformMessage(String channel, byte[] message, int replyId) {
    if (this.platformMessageHandler != null) {
        this.platformMessageHandler.handleMessageFromDart(channel, message, replyId);
    }
}

public void handleMessageFromDart(final String channel, byte[] message, final int replyId) {
    FlutterNativeView.this.assertAttached();
    BinaryMessageHandler handler = (BinaryMessageHandler)FlutterNativeView.this.mMessageHandlers.get(channel);
    if (handler != null) {
        try {
            ByteBuffer buffer = message == null ? null : ByteBuffer.wrap(message);
            handler.onMessage(buffer, new BinaryReply() {
                private final AtomicBoolean done = new AtomicBoolean(false);

                public void reply(ByteBuffer reply) {
                    if (!FlutterNativeView.this.isAttached()) {
                        Log.d(&quot;FlutterNativeView&quot;, &quot;handleMessageFromDart replying ot a detached view, channel=&quot; + channel);
                    } else if (this.done.getAndSet(true)) {
                        throw new IllegalStateException(&quot;Reply already submitted&quot;);
                    } else {
                        if (reply == null) {
                            FlutterNativeView.this.mFlutterJNI.invokePlatformMessageEmptyResponseCallback(replyId);
                        } else {
                            FlutterNativeView.this.mFlutterJNI.invokePlatformMessageResponseCallback(replyId, reply, reply.position());
                        }

                    }
                }
            });
        } catch (Exception var6) {
            Log.e(&quot;FlutterNativeView&quot;, &quot;Uncaught exception in binary message listener&quot;, var6);
            FlutterNativeView.this.mFlutterJNI.invokePlatformMessageEmptyResponseCallback(replyId);
        }

    } else {
        FlutterNativeView.this.mFlutterJNI.invokePlatformMessageEmptyResponseCallback(replyId);
    }
}
</code></pre>
<p>è¿™é‡Œé¢æˆ‘ä»¬çœ‹åˆ°è¿™æ ·ä¸€æ®µä»£ç ï¼Œ    BinaryMessageHandler handler = (BinaryMessageHandler)FlutterNativeView.this.mMessageHandlers.get(channel);<br>
é‚£è¿™ä¸ªhandleræ˜¯å¦‚ä½•æ ¹æ®channelè·Ÿè¸ªåˆ°çš„å‘¢ï¼Ÿæˆ‘ä»¬å·²ç»åˆ°Javaæ–¹æ³•äº†å•Šå¯ã€‚</p>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬è¯•ç€å›æƒ³ä¸€ä¸‹ï¼Œå½“æ—¶æ˜¯ä¸æ˜¯åœ¨MainActivityé‡Œé¢ä¹Ÿè®¾ç½®äº†ä¸ªåŒåçš„Stringï¼Œ è¿™ä¸ªå­—ç¬¦ä¸²æœ‰ç‚¹ä¼¼æ›¾ç›¸è¯†å‘¢ã€‚ç”±æ­¤çŒœæƒ³ï¼Œè¿™ä¸ªhandlerå¯èƒ½æ˜¯å½“æ—¶æˆ‘ä»¬è‡ªå·±è®¾è¿›å»çš„ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä¸‹ä»£ç <code>setMethodCallHandler</code>ï¼š</p>
<pre><code>private static final String CHANNEL = &quot;com.wuba.flutter.flutter_hades/login&quot;;
new MethodChannel(getFlutterView(), CHANNEL).setMethodCallHandler(
            new MethodChannel.MethodCallHandler() {
              @Override
              public void onMethodCall(MethodCall call, MethodChannel.Result result) {
                // Note: this method is invoked on the main thread.
              }
            });
            
            public void setMethodCallHandler(@Nullable MethodChannel.MethodCallHandler handler) {
    this.messenger.setMessageHandler(this.name, handler == null ? null : new MethodChannel.IncomingMethodCallHandler(handler));
}

public void setMessageHandler(String channel, BinaryMessageHandler handler) {
    this.mNativeView.setMessageHandler(channel, handler);
}
</code></pre>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­çœ‹è¿™ä¸ª<code>handler.onMessage()</code>æ–¹æ³•ï¼š</p>
<pre><code>public void onMessage(ByteBuffer message, final BinaryReply reply) {
    MethodCall call = MethodChannel.this.codec.decodeMethodCall(message);

    try {
        this.handler.onMethodCall(call, new MethodChannel.Result() {
            public void success(Object result) {
                reply.reply(MethodChannel.this.codec.encodeSuccessEnvelope(result));
            }

            public void error(String errorCode, String errorMessage, Object errorDetails) {
                reply.reply(MethodChannel.this.codec.encodeErrorEnvelope(errorCode, errorMessage, errorDetails));
            }

            public void notImplemented() {
                reply.reply((ByteBuffer)null);
            }
        });
    } catch (RuntimeException var5) {
        Log.e(&quot;MethodChannel#&quot; + MethodChannel.this.name, &quot;Failed to handle method call&quot;, var5);
        reply.reply(MethodChannel.this.codec.encodeErrorEnvelope(&quot;error&quot;, var5.getMessage(), (Object)null));
    }

}
</code></pre>
<p>æ–¹æ³•ä¸­é¦–å…ˆå°†ä»c++å±‚ä¼ é€’è¿‡æ¥çš„æ¶ˆæ¯é€šè¿‡codecè§£ç ä¸ºMethodCallå¯¹è±¡ï¼Œç„¶åè°ƒç”¨MainActivityä¸­å®ç°çš„MethodHandlerçš„onMethodCallæ–¹æ³•ï¼Œæ”¹æ–¹æ³•å®ç°ä¸­ä¼šæ‰§è¡Œandroidçš„APIè°ƒç”¨ï¼Œç„¶åè°ƒç”¨result.success()æ–¹æ³•ï¼Œé€šè¿‡reply.reply(MethodChannel.this.codec.encodeSuccessEnvelope(result));å°†ç»“æœæ•°æ®ç¼–ç åè¿›è¡Œè¿”å›ã€‚replyæ–¹æ³•ä¸­ä¼šè°ƒç”¨FlutterNativeView.this.mFlutterJNI.invokePlatformMessageResponseCallback(replyId, reply, reply.position());æ–¹æ³•å°†å“åº”ç»“æœè¿”å›ã€‚</p>
<p>ç„¶åå›è°ƒç»™C++å±‚ã€‚</p>
<p>æœ€ç»ˆå›è°ƒç»™UIå±‚ï¼Œè°ƒç”¨setStateå®Œæˆæ•´ä¸ªæ›´æ–°ã€‚</p>
<h3 id="æ€»ç»“">æ€»ç»“</h3>
<p>1.Flutterè°ƒç”¨invokeMethodæ–¹æ³•ï¼Œå°†codeè½¬ç å’Œå¹¶å»ºç«‹è·Ÿè¸ªå¯¹åº”çš„Messagehandleï¼›</p>
<p>2.åœ¨c++å±‚å¯¹å…¶è¿›è¡Œå°è£…ï¼Œé€šè¿‡sendPlatformMessageè°ƒç”¨JNIæ–¹æ³•ï¼›</p>
<p>3.æ ¹æ®è°ƒç”¨æ–¹æ³•æ‰¾åˆ°æœ€ç»ˆè°ƒç”¨å·²ç»æ³¨å†Œå¥½çš„Javaå¯¹è±¡çš„å¯¹åº”æ–¹æ³•ï¼›</p>
<p>4.è·å–å›è°ƒç»“æœå¹¶å°†ç»“æœè¿”å›ç»™C++å±‚ï¼›</p>
<p>5.C++å±‚è·å–ç»“æœåæœ€ç»ˆè¿”å›ç»™Flutterçš„setStateæ–¹æ³•ï¼Œåˆ·æ–°UIï¼›</p>
<h3 id="é¢„è§ˆæ•ˆæœå›¾">é¢„è§ˆæ•ˆæœå›¾</h3>
<figure data-type="image" tabindex="2"><img src="flutter_loginsdk.png" alt="flutter_loginsdk.png"></figure>
<h3 id="æ¥å…¥æŠ¥é”™">æ¥å…¥æŠ¥é”™</h3>
<p>1.A problem occurred configuring project ':sqflite'.</p>
<p>Could not download groovy-all.jar</p>
<p>å¦‚æœå‡ºç°èµ„æºæ‰¾ä¸åˆ°ï¼Œä¸€èˆ¬éƒ½æ˜¯gradleçš„é…ç½®æ–‡ä»¶å‡ºç°äº†é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•å…¥é…ç½®æ¥è§£å†³ï¼šåœ¨å·¥ç¨‹-&gt;android-&gt;build.gradleä¸‹ï¼Œå¯¹äºbuildscriptå’Œallprojectsä¸­çš„repositoriesè¿›è¡Œä¿®æ”¹ï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code>maven { url 'https://maven.aliyun.com/repository/google' }
maven { url 'https://maven.aliyun.com/repository/jcenter' }
maven { url 'http://maven.aliyun.com/nexus/content/groups/public' }
</code></pre>
<p>2.æ³¨å†Œè·³è½¬é¡µé¢éœ€è¦æ·»åŠ è·¯ç”±</p>
<p>æ³¨å†Œä¸€ä¸ªé¡µé¢ï¼Œè™½ç„¶ä¸éœ€è¦åƒandroidåŸç”Ÿä¸€æ ·åœ¨androidmanifest.xmlæ–‡ä»¶ä¸­æ³¨å†Œactivityï¼Œä½†æ˜¯åœ¨flutteré‡Œé¢ï¼Œéœ€è¦æ³¨å†Œè·¯ç”±ã€‚è·¯ç”±åˆ†ä¸ºé™æ€è·¯ç”±å’ŒåŠ¨æ€è·¯ç”±ï¼Œåªæœ‰æ³¨å†Œåï¼Œæ‰èƒ½å®Œæˆè·³è½¬ï¼›</p>
<p>3.This Overlay widget cannot be marked as needing to build because the framework is already in the<br>
process of building widgets</p>
<p>æˆ‘é€šè¿‡Aé¡µé¢æ·»åŠ äº†ä¸€ä¸ªGestureDetectorçš„onTapäº‹ä»¶è·³è½¬è¿›å…¥Bé¡µé¢ï¼Œä½†æ˜¯å½“æˆ‘ç”¨åŒæ ·çš„æ–¹æ³•åœ¨Bé¡µé¢å†æ·»åŠ GestureDetectorçš„æ—¶å€™ï¼Œåœ¨onTapé‡Œé¢æ·»åŠ ä¹‹åå°±ä¼šæŠ¥é”™ï¼›</p>
<pre><code>onTap: _onWubaLoginClick(), 
çœ‹è§æ²¡ï¼Œä¸Šé¢ä»£ç ï¼ŒåŸæ¥æ˜¯å¤šåŠ äº†ä¸€ä¸ª()ï¼ŒJavaé‡Œè°ƒç”¨æ–¹æ³•å°±æ˜¯æœ‰æ‹¬å·çš„å•Šï¼Œå†è¯´ä½ è¿™ä¸ªæŠ¥é”™å¯çœŸçš„æ˜¯è®©æˆ‘å¥½æ‰¾å•Š~
</code></pre>
<p>4.flutterå·¥ç¨‹ä¸‹ï¼Œæ— æ³•ç¼–è¯‘androidä¸‹çš„MainActivity.java</p>
<p>æ–°å¼€ä¸€ä¸ªå·¥ç¨‹ï¼Œå¼€å‘flutterçš„androidå·¥ç¨‹å³å¯</p>
<p>5.å–„äºåˆ©ç”¨å·¥å…·</p>
<p>åœ¨è¿›è¡Œflutterå¼€å‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬éš¾å…ä¼šé‡åˆ°å„ç§å„æ ·çš„é—®é¢˜ï¼Œå…¶å®å¤§éƒ¨åˆ†æˆ‘ä»¬éƒ½å¯ä»¥åœ¨å®˜æ–¹æ–‡æ¡£é‡Œé¢å¾—åˆ°è§£å†³ã€‚</p>
<p>æ‰€ä»¥æœ‰äº‹æ²¡äº‹ï¼Œçœ‹çœ‹å®˜ç½‘ï¼š<br>
https://flutterchina.club/platform-channels/</p>
<p>6.å¼•å…¥58çš„ç¬¬ä¸‰æ–¹æ‰¾ä¸åˆ°åº“</p>
<p>å…¶å®æ˜¯æ²¡æœ‰é…ç½®mavenä»“åº“ï¼Œéœ€è¦</p>
<pre><code>mavenLocal()
maven {
   url &quot;http://artifactory.58corp.com:8081/artifactory/android-public&quot;
}
</code></pre>
<p>7.java.lang.UnsatisfiedLinkError: dlopen failed: &quot;/data/data/com.wuba.flutter.flutter_hades/files/lib/libcom_wuba_uc_rsa.so&quot; is 32-bit instead of 64-bit</p>
<p>58APPæ¥å…¥çš„æ˜¯32ä½çš„ï¼Œé‚£ä¹ˆä¸ºå•¥åœ¨è¿™ä¸ªflutterçš„å·¥ç¨‹é‡Œé¢ï¼Œå®ƒéœ€è¦å¼•å…¥çš„æ˜¯64ä½çš„å‘¢ï¼Ÿ</p>
<p>8.libcom_wuba_uc_rsa.so&quot; &gt;= file size: 0 &gt;= 0</p>
<pre><code>java.lang.UnsatisfiedLinkError: dlopen failed: file offset for the library &quot;/data/user/0/com.wuba.flutter.flutter_hades/files/lib/libcom_wuba_uc_rsa.so&quot; &gt;= file size: 0 &gt;= 0
        at java.lang.Runtime.load0(Runtime.java:928)
        at java.lang.System.load(System.java:1621)
        at com.wuba.uc.RsaCryptService.b(RsaCryptService.java:43)
        at com.wuba.uc.RsaCryptService.a(RsaCryptService.java:24)
        at com.wuba.loginsdk.internal.b.process(InitCommon.java:24)
        at com.wuba.loginsdk.external.LoginSdk.register(LoginSdk.java:144)
        at com.wuba.loginsdk.external.LoginSdk.register(LoginSdk.java:60)
        at com.wuba.flutter.flutter_hades.WubaApplication.registeWubaLogin(WubaApplication.java:31)
        at com.wuba.flutter.flutter_hades.WubaApplication.onCreate(WubaApplication.java:15)
        at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:1119)
        at android.app.ActivityThread.handleBindApplication(ActivityThread.java:5881)
        at android.app.ActivityThread.-wrap1(Unknown Source:0)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1690)
        at android.os.Handler.dispatchMessage(Handler.java:105)
        at android.os.Looper.loop(Looper.java:176)
        at android.app.ActivityThread.main(ActivityThread.java:6701)
        at java.lang.reflect.Method.invoke(Native Method)
        at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:249)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:783)
</code></pre>
<p>9.support-v4</p>
<pre><code>java.lang.RuntimeException: Unable to get provider com.wuba.loginsdk.provider.PassportFileProvider: java.lang.ClassNotFoundException: Didn't find class &quot;com.wuba.loginsdk.provider.PassportFileProvider&quot; on path: DexPathList[[zip file &quot;/data/app/com.wuba.flutter.flutter_hades-pyib-R74ajY34PslDyjFsg==/base.apk&quot;],nativeLibraryDirectories=[/data/app/com.wuba.flutter.flutter_hades-pyib-R74ajY34PslDyjFsg==/lib/arm64, /data/app/com.wuba.flutter.flutter_hades-pyib-R74ajY34PslDyjFsg==/base.apk!/lib/arm64-v8a, /system/lib64, /system/vendor/lib64]]
        at android.app.ActivityThread.installProvider(ActivityThread.java:6447)
        at android.app.ActivityThread.installContentProviders(ActivityThread.java:5950)
        at android.app.ActivityThread.handleBindApplication(ActivityThread.java:5862)
        at android.app.ActivityThread.-wrap1(Unknown Source:0)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1690)
        at android.os.Handler.dispatchMessage(Handler.java:105)
        at android.os.Looper.loop(Looper.java:176)
        at android.app.ActivityThread.main(ActivityThread.java:6701)
        at java.lang.reflect.Method.invoke(Native Method)
        at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:249)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:783)
     Caused by: java.lang.ClassNotFoundException: Didn't find class &quot;com.wuba.loginsdk.provider.PassportFileProvider&quot; on path: DexPathList[[zip file &quot;/data/app/com.wuba.flutter.flutter_hades-pyib-R74ajY34PslDyjFsg==/base.apk&quot;],nativeLibraryDirectories=[/data/app/com.wuba.flutter.flutter_hades-pyib-R74ajY34PslDyjFsg==/lib/arm64, /data/app/com.wuba.flutter.flutter_hades-pyib-R74ajY34PslDyjFsg==/base.apk!/lib/arm64-v8a, /system/lib64, /system/vendor/lib64]]
        at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:93)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:379)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:312)
        at android.app.ActivityThread.installProvider(ActivityThread.java:6423)
        at android.app.ActivityThread.installContentProviders(ActivityThread.java:5950)Â 
        at android.app.ActivityThread.handleBindApplication(ActivityThread.java:5862)Â 
        at android.app.ActivityThread.-wrap1(Unknown Source:0)Â 
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1690)Â 
        at android.os.Handler.dispatchMessage(Handler.java:105)Â 
        at android.os.Looper.loop(Looper.java:176)Â 
        at android.app.ActivityThread.main(ActivityThread.java:6701)Â 
        at java.lang.reflect.Method.invoke(Native Method)Â 
        at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:249)Â 
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:783)Â 
    	Suppressed: java.lang.NoClassDefFoundError: Failed resolution of: Landroid/support/v4/content/FileProvider;
        at java.lang.VMClassLoader.findLoadedClass(Native Method)
        at java.lang.ClassLoader.findLoadedClass(ClassLoader.java:738)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:363)
        		... 12 more
     Caused by: java.lang.ClassNotFoundException: Didn't find class &quot;android.support.v4.content.FileProvider&quot; on path: DexPathList[[zip file &quot;/data/app/com.wuba.flutter.flutter_hades-pyib-R74ajY34PslDyjFsg==/base.apk&quot;],nativeLibraryDirectories=[/data/app/com.wuba.flutter.flutter_hades-pyib-R74ajY34PslDyjFsg==/lib/arm64, /data/app/com.wuba.flutter.flutter_hades-pyib-R74ajY34PslDyjFsg==/base.apk!/lib/arm64-v8a, /system/lib64, /system/vendor/lib64]]
        at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:93)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:379)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:312)
        		... 15 more
</code></pre>
<p>10.wlog&amp;soter&amp;ä¸¤ä¸ªå›¾ç‰‡èµ„æºæ‰¾ä¸åˆ°</p>
<h3 id="å‚è€ƒæ–‡ç« ">å‚è€ƒæ–‡ç« </h3>
<p>https://tech.meituan.com/2018/08/09/waimai-flutter-practice.html<br>
https://www.jianshu.com/p/185c42fe002b</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello Gridea]]></title>
        <id>https://Mozziehh.github.io/post/hello-gridea</id>
        <link href="https://Mozziehh.github.io/post/hello-gridea">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
]]></summary>
        <content type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
<!-- more -->
<p><a href="https://github.com/getgridea/gridea">Github</a><br>
<a href="https://gridea.dev/">Gridea ä¸»é¡µ</a><br>
<a href="http://fehey.com/">ç¤ºä¾‹ç½‘ç«™</a></p>
<h2 id="ç‰¹æ€§">ç‰¹æ€§ğŸ‘‡</h2>
<p>ğŸ“  ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ <strong>Markdown</strong> è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ</p>
<p>ğŸŒ‰  ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡</p>
<p>ğŸ·ï¸  ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„</p>
<p>ğŸ“‹  ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•</p>
<p>ğŸ’»  ä½ å¯ä»¥åœ¨ <strong>Windows</strong>ï¼Œ<strong>MacOS</strong> æˆ– <strong>Linux</strong> è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯</p>
<p>ğŸŒ  ä½ å¯ä»¥ä½¿ç”¨ <strong>ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ</strong> æˆ– <strong>Coding Pages</strong> å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°</p>
<p>ğŸ’¬  ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ <a href="https://github.com/gitalk/gitalk">Gitalk</a> æˆ– <a href="https://github.com/SukkaW/DisqusJS">DisqusJS</a> è¯„è®ºç³»ç»Ÿ</p>
<p>ğŸ‡¬ğŸ‡§  ä½ å¯ä»¥ä½¿ç”¨<strong>ä¸­æ–‡ç®€ä½“</strong>æˆ–<strong>è‹±è¯­</strong></p>
<p>ğŸŒ  ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›</p>
<p>ğŸ–¥  ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥</p>
<p>ğŸŒ± å½“ç„¶ <strong>Gridea</strong> è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ ğŸƒ</p>
<p>æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´</p>
<p>å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼</p>
<p>ğŸ˜˜ Enjoy~</p>
]]></content>
    </entry>
</feed>